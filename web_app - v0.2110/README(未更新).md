# 系统工程分析平台 - Web界面使用指南

## 📖 概述

本Web界面基于Dash框架开发，提供完整的8阶段系统工程分析工作流的交互式操作环境。

### 核心特性

- ✅ **8阶段完整工作流**：从问题定义到决策推荐
- ✅ **交互式可视化**：基于Plotly的动态图表
- ✅ **实时数据处理**：即时反馈和结果展示
- ✅ **数据导入/导出**：支持CSV/Excel/JSON格式
- ✅ **响应式设计**：适配桌面和平板设备
- ✅ **状态管理**：支持项目快照保存和恢复

  📋 Python版本要求

  推荐版本: Python 3.9+ （项目当前运行版本：Python 3.9.12）
  最低版本: Python 3.8

  📦 核心依赖库及版本

  前端框架

  | 库                         | 版本      | 用途           |
  |---------------------------|---------|--------------|
  | dash                      | 2.14.0+ | Web交互框架      |
  | dash-bootstrap-components | 1.5.0+  | Bootstrap组件库 |
  | plotly                    | 5.18.0+ | 数据可视化        |

  数据处理

  | 库      | 版本      | 用途      |
  |--------|---------|---------|
  | pandas | 2.0.0+  | 数据分析与处理 |
  | numpy  | 1.24.0+ | 数值计算    |

  服务器

  | 库        | 版本      | 用途             |
  |----------|---------|----------------|
  | gunicorn | 21.2.0+ | 生产WSGI服务器      |
  | Flask    | 1.1.2+  | Web框架（Dash的依赖） |
  | werkzeug | 2.0.3+  | WSGI工具库        |

  🚀 完整requirements.txt

  dash>=2.14.0
  dash-bootstrap-components>=1.5.0
  plotly>=5.18.0
  pandas>=2.0.0
  numpy>=1.24.0
  gunicorn>=21.2.0
  networkx
  dash-ace
  scipy
  sympy
  sqlalchemy
  RestrictedPython



  -i https://mirrors.aliyun.com/pypi/simple/
  


  ⚙️ 安装步骤

  # 1. 确保Python版本
  python --version  # 应显示 3.9.x 或更高

  # 2. 安装依赖
  pip install -r requirements.txt

   ## 使用conda的话
   conda install dash dash-bootstrap-components plotly numpy pandas networkx scipy sympy
   pip install gunicorn dash-ace -i https://mirrors.aliyun.com/pypi/simple/

  # 3. 启动应用
  python run.py

  # 4. 访问应用
  # 打开浏览器访问: http://localhost:8050

  📌 重要注意事项

  1. MacOS/Linux系统: 严禁使用系统自带Python，推荐使用conda创建虚拟环境
  2. 虚拟环境推荐:
  # 使用venv创建
  python3.9 -m venv venv
  source venv/bin/activate  # Linux/Mac
  # 或 venv\Scripts\activate  # Windows
  3. 当前系统状态:
    - ✅ Python 3.9.12 已安装
    - ✅ 所有依赖库已安装
    - ✅ 应用可在 http://localhost:8050 访问


## 🚀 快速开始

### 1. 安装依赖

```bash
cd web_app
pip install -r requirements.txt
```

### 2. 启动服务器

```bash
python run.py
```

或直接运行：

```bash
python app.py
```

### 3. 访问界面

打开浏览器访问：**http://localhost:8050**

## 📂 项目结构

```
web_app/
├── app.py                 # 主应用入口
├── run.py                 # 启动脚本
├── requirements.txt       # 依赖包
├── pages/                 # 页面模块
│   ├── __init__.py
│   ├── dashboard.py       # 仪表盘
│   ├── phase1.py          # Phase 1-8页面
│   ├── phase2.py
│   ├── ...
│   ├── phase8.py
│   └── data_management.py # 数据管理
├── components/            # 可复用组件
├── assets/                # 静态资源
│   ├── css/
│   │   └── custom.css     # 自定义样式
│   └── js/
└── utils/                 # 工具函数
```

## 🎯 使用流程

### 阶段1: 问题定义与价值映射

**访问路径**：仪表盘 → Phase 1

**操作步骤**：

1. **定义任务意图**
   - 输入任务标题和描述
   - 添加关键目标

2. **定义价值属性**
   - 点击"添加价值属性"
   - 填写属性名称、单位、优化方向、目标值
   - 示例：`resolution`, `m`, `minimize`, `1.0`

3. **注册设计变量**
   - 点击"添加设计变量"
   - 输入变量名称
   - 示例：`frequency`, `antenna_diameter`

4. **编辑DVM矩阵**
   - 为每个（设计变量，价值属性）对设置影响分数
   - 分数范围：0（无影响）到9（强影响）

5. **生成DVM热图**
   - 点击"生成DVM热图"
   - 查看可视化结果

6. **识别关键变量**
   - 设置影响阈值（默认0.65）
   - 点击"识别关键变量"

### 阶段2: 物理架构

**访问路径**：Phase 1 → Phase 2

**操作步骤**：

1. 添加系统组件
2. 定义组件间接口
3. 生成N²图可视化

### 阶段3: 效用建模

**访问路径**：Phase 2 → Phase 3

**操作步骤**：

1. 选择价值属性
2. 选择效用函数类型（线性/指数/S型/分段）
3. 设置函数参数
4. 查看效用曲线
5. 配置多场景权重

### 阶段4: 设计空间生成

**访问路径**：Phase 3 → Phase 4

**操作步骤**：

1. **详细定义设计变量**
   - 变量类型：连续/离散
   - 变量域：范围或选项列表
   - 单位

2. **配置采样**
   - 选择采样方法：
     - LHS（推荐）：均匀覆盖
     - Monte Carlo：随机采样
     - Sobol：低差异序列
     - 全因子：穷举组合
   - 设置采样数量（建议500-2000）
   - 设置随机种子（可选，用于复现）

3. **生成设计空间**
   - 点击"生成设计空间"
   - 查看采样分布可视化
   - 验证覆盖度

### 阶段5: 多域建模

**访问路径**：Phase 4 → Phase 5

**操作步骤**：

1. **定义成本模型**
   - 设置基础成本
   - 添加成本函数（支持Python表达式）
   - 示例：`10 * (diameter ** 2)`

2. **定义性能模型**
   - 添加性能函数
   - 设置依赖链
   - 示例：`resolution = (wavelength * altitude) / diameter`

3. **运行批量评估**
   - 选择评估选项（成本/性能/价值）
   - 点击"运行批量评估"
   - 查看进度条
   - 查看性能分布图和统计表

### 阶段6: 约束过滤

**访问路径**：Phase 5 → Phase 6

**操作步骤**：

1. **添加约束**
   - 不等式约束：`g(x) ≥ 0`
   - 等式约束：`h(x) = 0`
   - 逻辑约束：`True/False`
   - 示例：`resolution < 5`

2. **执行过滤**
   - 选择严格模式
   - 点击"执行过滤"
   - 查看可行设计数量
   - 查看过滤效果可视化

3. **Kill分析**
   - 点击"运行Kill分析"
   - 查看哪些约束杀死了最多设计

4. **边界设计探索**
   - 设置容差
   - 查找边界设计

### 阶段7: 权衡空间探索（核心）

**访问路径**：Phase 6 → Phase 7

**操作步骤**：

1. **配置视图**
   - 输入视图名称
   - 选择X轴、Y轴字段
   - 选择颜色、尺寸字段
   - 点击"创建视图"

2. **Pareto优化**
   - 选择优化目标
   - 设置优化方向（最小化/最大化）
   - 设置ε-容差
   - 点击"识别Pareto前沿"

3. **生成可视化**
   - **散点图**：成本vs性能
   - **平行坐标图**：多维度同时显示
   - **散点图矩阵**：两两对比

4. **交互探索**
   - 缩放：双击图表重置，滚轮缩放
   - 框选：拖动鼠标选择区域
   - 悬停：显示详细数据
   - 保存：点击相机图标

### 阶段8: 决策分析

**访问路径**：Phase 7 → Phase 8

**操作步骤**：

1. **配置多准则排名**
   - 选择评价准则
   - 选择排名方法（TOPSIS推荐）

2. **设置权重**
   - 调整权重滑块
   - 确保总和为100%
   - 点击"运行排名"

3. **查看Top设计**
   - 选择Top 5/10/20
   - 查看详细表格
   - 查看雷达图对比

4. **敏感性分析**
   - 选择变化的权重
   - 设置变化范围
   - 设置Monte Carlo样本数
   - 点击"运行敏感性分析"

5. **Pugh矩阵**
   - 选择基准设计
   - 选择对比设计
   - 生成Pugh矩阵

6. **生成决策报告**
   - 点击"生成决策报告"
   - 查看综合分析

7. **导出结果**
   - 导出CSV/Excel/PDF
   - 导出所有图表

## 📊 数据管理

**访问路径**：任意页面 → 数据管理

### 数据导入

1. **拖拽文件**到上传区域
2. 或点击选择文件
3. 支持格式：CSV, Excel (.xlsx), JSON
4. 查看数据预览

### 数据导出

1. **选择要导出的数据**
   - 所有设计方案
   - 可行设计
   - Pareto最优设计
   - Top 10设计

2. **选择导出格式**
   - CSV：纯文本表格
   - Excel：带格式表格
   - JSON：结构化数据

3. 点击对应按钮下载

### 图表导出

1. **选择要导出的图表**
   - DVM热图
   - 采样分布
   - 权衡空间散点图
   - 雷达图等

2. **选择导出格式**
   - PNG：静态图片
   - HTML：交互式网页
   - SVG：矢量图

### 项目管理

1. **创建快照**
   - 输入快照名称
   - 点击"创建快照"

2. **加载快照**
   - 从快照列表选择
   - 点击"加载"

3. **删除快照**
   - 点击"删除"按钮

## 🎨 界面导航

### 顶部导航栏

- 平台名称和版本信息
- 版本徽章

### 左侧导航菜单

- 仪表盘：项目概览
- Phase 1-8：8阶段工作流
- 数据管理：导入/导出

### 主内容区

- 动态加载对应页面内容
- 卡片式布局
- 交互式组件

### 页脚

- 版权信息
- 链接

## 🔧 高级功能

### 1. 示例项目加载

在仪表盘点击"加载示例项目"：
- 自动加载卫星雷达系统案例
- 包含完整的8阶段数据
- 2000个设计方案
- 312个可行设计

### 2. 批量操作

在Phase 7可以：
- 批量创建多个视图
- 同时显示多个图表
- 多视图联动刷选

### 3. 实时更新

所有操作即时生效：
- 修改参数立即重新计算
- 调整权重实时更新排名
- 添加约束即时过滤

### 4. 响应式设计

界面自适应不同屏幕：
- 桌面：3列布局
- 平板：2列布局
- 手机：1列布局

## 📝 最佳实践

### 工作流建议

1. **从仪表盘开始**
   - 新建或加载项目
   - 查看当前状态

2. **按顺序完成各阶段**
   - Phase 1-8依次进行
   - 每个阶段完成后保存快照

3. **充分探索权衡空间**
   - 创建多个视图
   - 尝试不同的字段映射
   - 查看Pareto前沿

4. **测试多种权重方案**
   - 成本优先
   - 性能优先
   - 平衡方案

5. **导出重要结果**
   - Top设计数据
   - 关键图表
   - 决策报告

### 性能优化

1. **采样数量**
   - 初步分析：500-1000
   - 详细分析：2000-5000
   - 精细分析：10000+

2. **图表性能**
   - 散点图：<2000点
   - 平行坐标图：<1000点
   - 使用数据采样

3. **浏览器缓存**
   - 定期清理缓存
   - 使用隐私模式测试

## 🐛 故障排除

### 页面无法加载

```bash
# 检查依赖是否安装
pip list | grep dash

# 重新安装
pip install -r requirements.txt
```

### 图表不显示

1. 检查浏览器控制台错误
2. 刷新页面（Ctrl+F5）
3. 清除浏览器缓存

### 数据上传失败

1. 检查文件格式是否支持
2. 检查文件大小（<100MB）
3. 检查文件编码（UTF-8）

### 端口被占用

```bash
# 修改app.py中的端口
app.run_server(port=8051)  # 改为8051
```

## 🔐 安全提示

1. **本地运行**
   - 默认绑定到0.0.0.0
   - 仅在本地网络访问

2. **生产部署**
   - 使用Gunicorn
   - 配置HTTPS
   - 添加认证

3. **数据隐私**
   - 数据仅存储在本地
   - 不会上传到外部服务器

## 📞 技术支持

### 获取帮助

- 文档：查看本指南
- 示例：加载示例项目
- GitHub：提交Issue

### 常用快捷键

- `Ctrl+F5`：强制刷新
- `F12`：打开开发者工具
- `Ctrl+S`：保存（部分功能）

## 🎉 总结

Web界面提供了：

✅ **完整功能**：8阶段全覆盖
✅ **友好交互**：点击即可操作
✅ **实时反馈**：即时查看结果
✅ **灵活可视化**：多种图表类型
✅ **便捷管理**：导入导出轻松

**开始使用吧！** 🚀

---

**版本**: v1.0
**更新日期**: 2025-12-15
**适用于**: 系统工程分析平台 v4.0
